<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2>Video Game Catalogue</h2>
    <button (click)="createNewGame()" class="btn btn-primary">
      <i class="bi bi-plus-circle"></i> Add New Game
    </button>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="text-center py-5">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="alert alert-danger">
    {{ error }}
    <button (click)="loadGames()" class="btn btn-sm btn-outline-danger ms-3">Retry</button>
  </div>

  <!-- Game Table -->
  <div *ngIf="!isLoading && !error">
    <div class="table-responsive">
      <table class="table table-hover">
        <thead>
          <tr>
            <th>Title</th>
            <th>Developer</th>
            <th>Release Date</th>
            <th>Genre</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let game of games" (click)="viewGame(game.id)" class="clickable-row">
            <td>{{ game.title }}</td>
            <td>{{ game.developer }}</td>
            <td>{{ formatReleaseDate(game.releaseDate) }}</td>
            <td>{{ game.genre }}</td>
            <td class="text-end">
              <button (click)="viewGame(game.id); $event.stopPropagation()"
                      class="btn btn-sm btn-outline-primary">
                Details
              </button>
              <button (click)="deleteGame(game.id); $event.stopPropagation()"
                      class="btn btn-sm btn-outline-primary">
                Delete
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <div *ngIf="games.length === 0" class="alert alert-info">
      No games found. Add your first game!
    </div>

    <!-- Pagination Controls -->
    <nav *ngIf="games.length > 0" class="d-flex justify-content-center mt-4" aria-label="Page navigation">
      <ul class="pagination mb-0">
        <li class="page-item" [class.disabled]="pageNumber === 1">
          <button class="page-link" (click)="previousPage()" [disabled]="pageNumber === 1">Previous</button>
        </li>
        <li class="page-item disabled">
          <span class="page-link">
            Page {{ pageNumber }}
          </span>
        </li>
        <li class="page-item" [class.disabled]="games.length < pageSize">
          <button class="page-link" (click)="nextPage()" [disabled]="games.length < pageSize">Next</button>
        </li>
      </ul>
    </nav>
  </div>
</div>
